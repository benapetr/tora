<HTML><HEAD><TITLE>Rollback Segments</TITLE></HEAD><BODY>
<H1>Rollback Segments</H1>
This tool is used to manage rollback segments in the database.<P>
<IMG SRC=images/rollback.png><P>
The window consist of three part. The top one displays the available rollback segments and
you can also see running transaction that use segment in the <B>transactions</B> column of the
view, the length of the transactions show up as bars in this column. One bar for each running
transaction using the segment.<P>
The last part is a unique tool to detect snapshot too old problems in your database. This is
discussed more <A HREF=rollback.html#later>later</A>.<P>
<H2>Toolbar</H2>
The toolbar contains the following commands.<P>
<TABLE>
<TR><TD VALIGN=top><B>
Update</B></TD><TD VALIGN=top>
Update the view from the database.</TD></TR>
<TR><TD VALIGN=top><B>
Online</B></TD><TD VALIGN=top>
Take currently selected segment online.</TD></TR>
<TR><TD VALIGN=top><B>
Offline</B></TD><TD VALIGN=top>
Take currently selected segment off-line.</TD></TR>
<TR><TD VALIGN=top><B>
New rollback segment</B></TD><TD VALIGN=top>
Create new rollback segment. If you are confused about what the items in the dialog mean refer
to the Oracle Server Concepts manual as well as the Oracle SQL Reference.</TD></TR>
<TR><TD VALIGN=top><B>
Drop segment</B></TD><TD VALIGN=top>
Drop the currently selected segment.</TD></TR>
<TR><TD VALIGN=top><B>
Refresh time</B></TD><TD VALIGN=top>
A list where you can select the interval between automatic updates.</TD></TR>
</TABLE><P>
<H2>Snapshot too old detection</H2>
The lower part of this view is used to heuristically detect snapshot too old problems. The
operation of this is that whenever the view is updated all SGA statements are cataloged and
the corresponding current position in all the rollback segments are also stored the first
time a new statement is detected. Since the information about the current location of the
rollback when a statement was executed is not available in the SGA you have to keep the
tool window open during the entire duration of the execution for this to work.<P>
In the view you can see when the statement was first detected and
who is running it. You also see the snapshot info which will display how far each of
the available rollback segments have moved since this statement was executed. This is represented
by one bar for each rollback segment. If any of these bars goes all the way through this column
you are likely to encounter a snapshot too old statement.<P>
Finally you can see the SQL for the row. Selecting a line will also let you investigate the
statement using the normal <A HREF=common.html#sga>SGA statement</A> view.<P>
There are a few options to configure how the snapshot too old detection is to work.<P>
<IMG SRC=images/rollbacksetup.png><P>
<TABLE>
<TR><TD VALIGN=top><B>
Restart reexecuted statements</B></TD><TD VALIGN=top>
If the execution count is changed for a statement reset the location of the rollback
segments to the current location.</TD></TR>
<TR><TD VALIGN=top><B>
Must read buffers</B></TD><TD VALIGN=top>
To display a statement it must be reading buffers, it is still kept in memory if no buffers
are read, but not displayed in the list until buffers are read again. Check this to remove
any statements that you execute and simply kept open even though you will not be reading
from them any more.</TD></TR>
<TR><TD VALIGN=top><B>
Exclude first appearance</B></TD><TD VALIGN=top>
Exclude the first update that would show the statement. Without this checked any statement
with execution changed and buffers read will show up.</TD></TR>
<TR><TD VALIGN=top><B>
Disregard start extent</B></TD><TD VALIGN=top>
If you check this the bars will always start from the left of the column. Otherwise the bars
will start corresponding to the current extent of the tablespace and then wrap around as
they grow.</TD></TR>
</TABLE>
</BODY>
</HTML>