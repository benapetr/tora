<HTML>
<HEAD>
<TITLE>class toConnection</TITLE>

<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">
<TABLE WIDTH="100%" BORDER="0">
<TR>
<TD>
	<TABLE BORDER="0">
		<TR><TD valign="top" align="left" cellspacing="10">
		<h1>class toConnection</h1>
		</TD>
		<TD valign="top" align="right" colspan="1">
 This class defines a connection to a database. <small><A HREF="#longdesc">More...</A></small></TD></TR>
	</TABLE>
	<HR>
	<TABLE BORDER="0">
		<TR><TH>Definition</TH><TD><code>#include &lt;<A HREF="toconnection_h.html">toconnection.h</A>&gt;</code></TD></TR>
<TR><TH><A HREF="full-list-toConnection.html">List of all Methods</A></TH></TR>
	</TABLE>
	</TD>
<TD align="right"><TABLE BORDER="0"><TR><TD><small><A HREF="index-long.html">Annotated List</A></small></TD></TR>
<TR><TD><small><A HREF="header-list.html">Files</A></small></TD></TR>
<TR><TD><small><A HREF="all-globals.html">Globals</A></small></TD></TR>
<TR><TD><small><A HREF="hier.html">Hierarchy</A></small></TD></TR>
<TR><TD><small><A HREF="index.html">Index</A></small></TD></TR>
</TABLE></TD></TR></TABLE>
<h4>Public Methods</h4><ul><LI>&nbsp;<b><A HREF="#ref14">toConnection</A></b> (bool sqlNet,
	       const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;iuser,const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;ipassword,const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;ihost,
	       const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;mode=QString::null) 
</LI>
<LI>&nbsp;<b><A HREF="#ref15">toConnection</A></b> (const <A HREF="toConnection.html">toConnection</A> &amp;conn) 
</LI>
<LI>&nbsp;<b><A HREF="#ref16">~toConnection</A></b> () 
</LI>
<LI>bool &nbsp;<b><A HREF="#ref17">closeWidgets</A></b> (void) 
</LI>
<LI>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<b><A HREF="#ref18">user</A></b> ()  const
</LI>
<LI>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<b><A HREF="#ref19">password</A></b> ()  const
</LI>
<LI>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<b><A HREF="#ref20">host</A></b> ()  const
</LI>
<LI>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<b><A HREF="#ref21">mode</A></b> ()  const
</LI>
<LI>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<b><A HREF="#ref22">version</A></b> ()  const
</LI>
<LI>bool &nbsp;<b><A HREF="#ref23">needCommit</A></b> (void)  const
</LI>
<LI>void &nbsp;<b><A HREF="#ref24">commit</A></b> (void) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref25">rollback</A></b> (void) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref26">setNeedCommit</A></b> (bool needCommit=true) 
</LI>
<LI><A HREF="http://doc.trolltech.com/qstring.html">QString</A> &nbsp;<b><A HREF="#ref27">connectString</A></b> (bool pw=false)  const
</LI>
<LI><A HREF="#otl_connect">otl_connect</A> &amp;&nbsp;<b><A HREF="#ref28">connection</A></b> () 
</LI>
<LI>void &nbsp;<b><A HREF="#ref29">addWidget</A></b> (<A HREF="http://doc.trolltech.com/qwidget.html">QWidget</A> *widget) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref30">delWidget</A></b> (<A HREF="http://doc.trolltech.com/qwidget.html">QWidget</A> *widget) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref31">addInit</A></b> (const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;sql) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref32">delInit</A></b> (const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;sql) 
</LI>
<LI><A HREF="#otl_connect">otl_connect</A> *&nbsp;<b><A HREF="#ref33">longOperation</A></b> (void) 
</LI>
<LI>void &nbsp;<b><A HREF="#ref34">longOperationFree</A></b> (<A HREF="#otl_connect">otl_connect</A> *conn) 
</LI>
<LI>list&lt;<A HREF="#otl_connect">otl_connect</A> *&gt; &amp;&nbsp;<b><A HREF="#ref35">otherSessions</A></b> (void) 
</LI>
</ul><HR><H2><A NAME="longdesc">Detailed Description</A></H2><p>
 This class defines a connection to a database.
</p>
<p> Actually it can represent several connections since it has the ability to
 clone the connection if for some reason or other you need another connection
 to the database.
</p>
<p> The actuall interface to the database is the excellent OTL library which
 reference is beyond the scope of this documentation but it is available online
 at this location http://www.geocities.com/skuchin/otl/home.htm.
</p>
<p> Connections can be made in two modes, using SQL*Net or not. When connecting using
 SQL*Net a connection is made in OTL using the connectstring user/password@db. If
 not using SQL*Net the ORACLE_SID environment variable is temporarily changed to
 the db and then the connection is made using user/password.
</p>
<p> All connections to Oracle in TOra are made using UTF-8 encoding. This means that
 whenever you convert a QString to pass it to or from Oracle you should use the
 fromUtf8 or utf8 functions and NOT just convert it to const char * which will
 convert it to latin1 which will not work.
 </p>
<A NAME="toConnection"></A><A NAME="ref14"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>toConnection</strong> (bool sqlNet,
	       const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;iuser,const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;ipassword,const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;ihost,
	       const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;mode=QString::null)
<br></td><td align="right"><h3><strong>toConnection</strong></h3></td></tr></table><p></p><p>
 Create a new connection.
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>sqlNet</i></TD><TD align="left" valign="top">Indicate if SQL*Net is to be used for this connection.
</TD></TR>
<TR><TD align="left" valign="top"><i>iuser</i></TD><TD align="left" valign="top">User to connect with.
</TD></TR>
<TR><TD align="left" valign="top"><i>ipassword</i></TD><TD align="left" valign="top">Password to connect with.
</TD></TR>
<TR><TD align="left" valign="top"><i>ihost</i></TD><TD align="left" valign="top">Host or database to connect to.
</TD></TR>
<TR><TD align="left" valign="top"><i>mode</i></TD><TD align="left" valign="top">Mode of connection, can be empty, SYS_OPER or SYS_DBA to indicate
             which options to use when connecting.
   </TD></TR>
</TABLE></P>
<A NAME="toConnection"></A><A NAME="ref15"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>toConnection</strong> (const <A HREF="toConnection.html">toConnection</A> &amp;conn)
<br></td><td align="right"><h3><strong>toConnection</strong></h3></td></tr></table><p></p><p>
 Create a copy of a connection
   </p>
<A NAME="~toConnection"></A><A NAME="ref16"></A><table width="100%"><tr bgcolor="#eeeeee"><td>&nbsp;<strong>~toConnection</strong> ()
<br></td><td align="right"><h3><strong>~toConnection</strong></h3></td></tr></table><p></p><A NAME="closeWidgets"></A><A NAME="ref17"></A><table width="100%"><tr bgcolor="#eeeeee"><td>bool &nbsp;<strong>closeWidgets</strong> (void)
<br></td><td align="right"><h3><strong>closeWidgets</strong></h3></td></tr></table><p></p><p>
 Close the widgets that are using this connection.
</p>
<p><b>Returns</b>: Returns true if all widgets agreed to close, otherwise false is returned.
   </p>
<A NAME="user"></A><A NAME="ref18"></A><table width="100%"><tr bgcolor="#eeeeee"><td>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<strong>user</strong> ()
<br></td><td align="right"><h3><strong>user</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get user.
</p>
<p></p>
<p><b>Returns</b>: User of connection.
   </p>
<A NAME="password"></A><A NAME="ref19"></A><table width="100%"><tr bgcolor="#eeeeee"><td>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<strong>password</strong> ()
<br></td><td align="right"><h3><strong>password</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get password.
</p>
<p></p>
<p><b>Returns</b>: Password of connection.
   </p>
<A NAME="host"></A><A NAME="ref20"></A><table width="100%"><tr bgcolor="#eeeeee"><td>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<strong>host</strong> ()
<br></td><td align="right"><h3><strong>host</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get host.
</p>
<p></p>
<p><b>Returns</b>: Host of connection.
   </p>
<A NAME="mode"></A><A NAME="ref21"></A><table width="100%"><tr bgcolor="#eeeeee"><td>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<strong>mode</strong> ()
<br></td><td align="right"><h3><strong>mode</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get mode.
</p>
<p></p>
<p><b>Returns</b>: Mode of connection.
   </p>
<A NAME="version"></A><A NAME="ref22"></A><table width="100%"><tr bgcolor="#eeeeee"><td>const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;&nbsp;<strong>version</strong> ()
<br></td><td align="right"><h3><strong>version</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get version.
</p>
<p></p>
<p><b>Returns</b>: Version of connection.
   </p>
<A NAME="needCommit"></A><A NAME="ref23"></A><table width="100%"><tr bgcolor="#eeeeee"><td>bool &nbsp;<strong>needCommit</strong> (void)
<br></td><td align="right"><h3><strong>needCommit</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get information about if the connection has uncommited data.
</p>
<p></p>
<p><b>Returns</b>: Wether uncommited data is available.
   </p>
<A NAME="commit"></A><A NAME="ref24"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>commit</strong> (void)
<br></td><td align="right"><h3><strong>commit</strong></h3></td></tr></table><p></p><p>
 Commit connection. This will also close all extra connections except one.
   </p>
<A NAME="rollback"></A><A NAME="ref25"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>rollback</strong> (void)
<br></td><td align="right"><h3><strong>rollback</strong></h3></td></tr></table><p></p><p>
 Rollback connection. This will also close all extra connections except one.
   </p>
<A NAME="setNeedCommit"></A><A NAME="ref26"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>setNeedCommit</strong> (bool needCommit=true)
<br></td><td align="right"><h3><strong>setNeedCommit</strong></h3></td></tr></table><p></p><p>
 Set if commit is needed.
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>needCommit</i></TD><TD align="left" valign="top">Wether commit is needed.
   </TD></TR>
</TABLE></P>
<A NAME="connectString"></A><A NAME="ref27"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="http://doc.trolltech.com/qstring.html">QString</A> &nbsp;<strong>connectString</strong> (bool pw=false)
<br></td><td align="right"><h3><strong>connectString</strong></h3></td></tr></table><p> <small>[const]</small></p><p>
 Get a connectstring for this connection.
</p>
<p></p>
<p><b>Returns</b>: pw If this is true a connectstring that can be used with otl_connect is
            returned, otherwise a descriptive string of the connection without
            the password is returned.
   </p>
<A NAME="connection"></A><A NAME="ref28"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="#otl_connect">otl_connect</A> &amp;&nbsp;<strong>connection</strong> ()
<br></td><td align="right"><h3><strong>connection</strong></h3></td></tr></table><p></p><p>
 Get the main connection of this connection.
</p>
<p></p>
<p><b>Returns</b>: A reference to the connection.
   </p>
<A NAME="addWidget"></A><A NAME="ref29"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>addWidget</strong> (<A HREF="http://doc.trolltech.com/qwidget.html">QWidget</A> *widget)
<br></td><td align="right"><h3><strong>addWidget</strong></h3></td></tr></table><p></p><p>
 Add a widget that uses this connection. This is needed to ensure that all widgets
 that make use of a connection are destroyed when the connection is closed. Usually
 tool windows need to call this function.
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>widget</i></TD><TD align="left" valign="top">The widget to add to the connection.
   </TD></TR>
</TABLE></P>
<A NAME="delWidget"></A><A NAME="ref30"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>delWidget</strong> (<A HREF="http://doc.trolltech.com/qwidget.html">QWidget</A> *widget)
<br></td><td align="right"><h3><strong>delWidget</strong></h3></td></tr></table><p></p><p>
 Remove a widget from this connection. Should be called by the destructor of the
 widget that has called addWidget.
</p>
<p></p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>widget</i></TD><TD align="left" valign="top">Widget to remove from the widget list.
   </TD></TR>
</TABLE></P>
<p><b>See also</b>: addWidget</p>
<A NAME="addInit"></A><A NAME="ref31"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>addInit</strong> (const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;sql)
<br></td><td align="right"><h3><strong>addInit</strong></h3></td></tr></table><p></p><p>
 Add a statement to be run uppon making new connections.
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>sql</i></TD><TD align="left" valign="top">Statement to run.
   </TD></TR>
</TABLE></P>
<A NAME="delInit"></A><A NAME="ref32"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>delInit</strong> (const <A HREF="http://doc.trolltech.com/qstring.html">QString</A> &amp;sql)
<br></td><td align="right"><h3><strong>delInit</strong></h3></td></tr></table><p></p><p>
 Remove a statement that was added using <A HREF="toConnection.html#addInit">addInit</A>.
   </p>
<A NAME="longOperation"></A><A NAME="ref33"></A><table width="100%"><tr bgcolor="#eeeeee"><td><A HREF="#otl_connect">otl_connect</A> *&nbsp;<strong>longOperation</strong> (void)
<br></td><td align="right"><h3><strong>longOperation</strong></h3></td></tr></table><p></p><p>
 Get a longrunning connection. Will create a new connection or return a free
 connection already available. It can also return the main connection if TOra
 is configured to not create new connections for long running queries. The
 connection should be returned using the <A HREF="toConnection.html#longOperationFree">longOperationFree</A> function.
</p>
<p></p>
<p><b>Returns</b>: A pointer to a connection.
   </p>
<A NAME="longOperationFree"></A><A NAME="ref34"></A><table width="100%"><tr bgcolor="#eeeeee"><td>void &nbsp;<strong>longOperationFree</strong> (<A HREF="#otl_connect">otl_connect</A> *conn)
<br></td><td align="right"><h3><strong>longOperationFree</strong></h3></td></tr></table><p></p><p>
 Return a connection that is no longer needed. This can be reused or discarded
 when no longer needed. It will not be removed until either commit or rollback
 is issued.
</p>
<p><b>Parameters</b>:<TABLE BORDER="0" CELLPADDING="5">
<TR><TD align="left" valign="top"><i>conn</i></TD><TD align="left" valign="top">Connection to return.
   </TD></TR>
</TABLE></P>
<A NAME="otherSessions"></A><A NAME="ref35"></A><table width="100%"><tr bgcolor="#eeeeee"><td>list&lt;<A HREF="#otl_connect">otl_connect</A> *&gt; &amp;&nbsp;<strong>otherSessions</strong> (void)
<br></td><td align="right"><h3><strong>otherSessions</strong></h3></td></tr></table><p></p><p>
 Get a list of the other sessions that this connection has made and not closed
 yet.
   </p>
<HR>
	<table>
	<tr><td><small>Generated by: hpj@gain.globecom.net on Wed Jun 13 21:24:22 2001, using kdoc 2.0a53.</small></td></tr>
	</table>
</BODY>
</HTML>
